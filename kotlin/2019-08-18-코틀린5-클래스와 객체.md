# 클래스와 객체

> 학습 자료 출처
 - Do it! 코틀린 프로그래밍

## 클래스와 객체의 정의
 > 객체 지향 프로그래밍(OOP) 는 프로그램의 구조를 객체 간 상호작용으로써 표현하는 프로그래밍 방식
 
 - 개념들
    - 추상화: 특정 클래스를 만들 때 기본 형식을 규정하는 방법
    - 인스턴스 : 클래스로부터 생성한 객체
    - 상속 : 부모 클래스의 내용을 자식 클래스가 그대로 물려받음
    - 다형성 : 하나의 이름으로 다양한 처리를 제공
    - 캡슐화 : 내용을 숨기고 필요한 부분만 사용
    - 메시지 전송: 객체 간에 주고받는 메세지
    - 연관 : 클래스 간의 관계

### 객체지향 프로그래밍 용어 정리 
    
 |코틀린에서 사용하는 용어|다른 언어에서 사용하는 용어|
 |------|---|
 |클래스(Class)|분류,범주|
 |프로퍼티(property) | 속성(Attribute), 변수(Variable), 필드(Field), 데이터(Data) |
 |메서드|함수(Function), 동작(Operation), 행동(Behavior)|
 |객체(Object)|인스턴스(Instance)|
 
### 클래스 선언하기

#### BirdClassDefine.kt
 ```kotlin
package io.jmlim.kotlinstudy.chap05.section1.define

// 1. 클래스의 정의
class Bird {
    // 2. 프로퍼티 (속성)
    var name: String = "method"
    var wing: Int = 2
    var beak: String = "short"
    var color: String = "blue"

    // 3. 메서드 (함수)
    fun fly() = println("Fly wing: $wing")

    fun sing(vol: Int) = println("Sing vol: $vol")
}

fun main() {
    // 4. 클래스의 생성자를 통한 객체의 생성
    val coco = Bird()
    // 5. 객체의 프로퍼티에 값 할당
    coco.color = "blue"

    // 6. 객체의 멤버 프로퍼티 읽기
    println("colo.color: ${coco.color}")
    // 7. 객체의 멤버 메서드 사용
    coco.fly()
    coco.sing(3)
}

```

```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=65162:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section1.define.BirdClassDefineKt
colo.color: blue
Fly wing: 2
Sing vol: 3

Process finished with exit code 0
```

## 생성자
 - 생성자(Constructor) 란 클래스를 통해 객체가 만들어질 때 기본적으로 호출되는 함수
 - 생성자는 주 생성자(Primary Constructor)와 부 생성자(Secondary Constructor)로 나뉘며 필요에 따라 주 생성자 또는 부 생성자를 사용할 수 있음
 
> 아래에서 constructor 키워드를 사용해 약간 복잡해 보이는 부 생성자에 대해 먼저 알아보고 간략화된 기법인 주 생성자를 살펴본다.

```kotlin
package io.jmlim.kotlinstudy.chap05.section2.secondary

class Bird {
    // 1. 프로퍼티 - 선언만 함
    var name: String
    var wing: Int
    var beak: String
    var color: String

    // 2. 부 생성자 - 매개변수를 통해 초기화할 프로퍼티를 저장
    constructor(name: String, wing: Int, beak: String, color: String) {
        // 3. this.name 은 선언된 현재 클래스의 프로퍼티를 나타냄
        this.name = name
        this.wing = wing
        this.beak = beak
        this.color = color
    }

    // 메서드
    fun fly() = println("Fly wing: $wing")
    fun sing(vol: Int) = println("Sing vol: $vol")
}

fun main() {
    // 4. 생성자의 인자로 객체 생성과 동시에 초기화
    val coco = Bird("mybird", 2, "short", "blue")

    coco.color = "yellow"
    println("coco.color : ${coco.color}")
    coco.fly()
    coco.sing(3)
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=53664:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section2.secondary.BirdSecondaryConstructorKt
coco.color : yellow
Fly wing: 2
Sing vol: 3

Process finished with exit code 0
```

> this 키워드를 사용하지 않으려면 프로퍼티와 매개변수를 구분하기 위해 다른 이름을 사용한다. 매개변수 이름앞에 언더스코어 붙이는 형태로~

```kotlin
constructor(_name: String, _wing: Int, _beak: String, _color: String) {
    name = _name
    wing = _wing
    beak = _beak
    color = _color
}   
```

### 부 생성자를 여러개 포함한 클래스 사용

```kotlin
class Bird {
    // 1. 프로퍼티 - 선언만 함
    var name: String
    var wing: Int
    var beak: String
    var color: String

    // 2. 부 생성자 - 매개변수를 통해 초기화할 프로퍼티를 저장
    constructor(name: String, wing: Int, beak: String, color: String) {
        // 3. this.name 은 선언된 현재 클래스의 프로퍼티를 나타냄
        this.name = name
        this.wing = wing
        this.beak = beak
        this.color = color
    }
    
    // 두번째 부 생성자
   constructor(name: String, beak: String) {
       // 3. this.name 은 선언된 현재 클래스의 프로퍼티를 나타냄
        this.name = name
        this.wing = 2
        this.beak = beak
        this.color = "gray"
   }

    // 메서드
    fun fly() = println("Fly wing: $wing")
    fun sing(vol: Int) = println("Sing vol: $vol")
}

fun main() {
....
    // 4. 생성자의 인자로 객체 생성과 동시에 초기화
    val coco = Bird("mybird", 2, "short", "blue")
    val coco2 = Bird("mybird2", "long")
....
}
```

### 주 생성자
 - 주 생성자는 클래스 이름과 함께 생성자 정의를 이용할 수 있는 기법
 - 주 생성자의 선언은 클래스 이름 오른쪽에 constructor 키워드로 시작
 - 주 생성자의 constructor 키워드는 클래스 옆에 생성자를 만드는 방법으로 생략
 
```kotlin
class Bird(_name: String, _wing: Int, _beak: String, _color: String)  {  // constructor 생략
 ...
}
```

#### 프로퍼티를 포함한 주 생성자
 - val, var 를 사용하여 매개변수를 선언하면 생성자에서 this 키워드를 사용하거나 매개변수 이름에 언더스코어를 붙인 다음 생성자에서 인자를 할당할 필요가 없음
```kotlin
class Bird(val name: String, val wing: Int, val beak: String, val color: String)  {  // constructor 생략
...
}
```

#### BirdPrimaryConstructor.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section2.primary

class Bird(var name: String, var wing: Int, var beak: String, var color: String) {
    // 프로퍼티는 매개변수 안에 var 를 사용해 프로퍼티로서 선언되어 본문에서 생략됨

    // 메서드
    fun fly() = println("Fly wing: $wing")

    fun sing(vol: Int) = println("Sing vol: $vol")
}

fun main() {
    val coco = Bird("jmlim bird", 2, "short", "blue")

    coco.color = "yellow"
    println("coco.color: ${coco.color}")
    coco.fly()
    coco.sing(3)
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=54377:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section2.primary.BirdPrimaryConstructorKt
coco.color: yellow
Fly wing: 2
Sing vol: 3

Process finished with exit code 0
```
#### 초기화 블록을 가진 주 생성자
 - 객체를 생성할 때 변수 초기화 이외에 코드를 실행할 수 있는 방법?
 - 초기화에 꼭 사용해야 할 코드가 있다면 init {...} 초기화 블록을 클래스 선언부에 넣어 중어야 함.
 
#### BirdPrimaryInit.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section2.init

class Bird(var name: String, var wing: Int, var beak: String, var color: String) {
    // 1. 초기화 블록
    init {
        println("------------초기화 블록 -----------")
        println("이름은 $name, 부리는 $beak")
        this.sing(3)
        println("-----------초기화 블록 끝----------")
    }

    fun fly() = println("Fly wing: $wing")
    fun sing(vol: Int) = println("Sing vol: $vol")
}

fun main() {
    // 2.객체 생성과 함께 초기화 블록 수행
    val coco = Bird("jmlim bird", 2, "short", "blue")

    coco.color = "yellow"
    println("coco.color: ${coco.color}")
    coco.fly()
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=55158:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section2.init.BirdPrimaryInitKt
------------초기화 블록 -----------
이름은 jmlim bird, 부리는 short
Sing vol: 3
-----------초기화 블록 끝----------
coco.color: yellow
Fly wing: 2

Process finished with exit code 0
```

- 생성자의 매개변수에 기본값을 지정가능

```kotlin

class Bird(var name: String = "NONAME", var wing: Int = 2, var beak: String, var color: String) {
    ....
}

fun main() {
    // 기본값이 있는것은 생략하고 없는것만 전달 가능
    val coco = Bird(beak = "long", color = "red")

    println("coco.name: ${coco.name}, coco.wing: ${coco.wing}")
    println("coco.color: ${coco.color}, coco.beak: ${coco.beak}")
}
```
```
coco.name: NONAME, coco.wing: 2
coco.color: red, coco.beak: long

Process finished with exit code 0
```

## 상속과 다형성

- 코틀린 모든 클래스는 Any 클래스의 하위 클래스가 되며, 상위 클래스를 명시하지 않으면 Any 클래스를 상속받게 됨.

### 하위 클래스 선언하기.

```kotlin
 val someVal: Int  // 일반 변수의 선언
 open class BaseClass(someArgs: Int) // 상속 가능한 클래스
 class SomeClass(someArgs: Int) : BaseClass(someArgs) // 클래스 상속의 선언
 class SomeClass : BaseClass{ ... constructor() ... } //부 생성자를 사용할 때 클래스 상속 선언
```

Bird 클래스에서 파생된 2개의 클래스 만들어 보기

#### BirdChildClasses.kr
```kotlin
package io.jmlim.kotlinstudy.chap05.section2.openclass

// 1. 상속 가능한 클래스를 선언하기 위해 open 사용
open class Bird(var name: String, var wing: Int, var beak: String, var color: String) {
    // 메서드
    fun fly() = println("Fly wing: $wing")

    fun sing(vol: Int) = println("Sing vol: $vol")
}

// 2. 주 생성자를 사용하는 상속
class Lark(name: String, wing: Int, beak: String, color: String) :
    Bird(name, wing, beak, color) {
    // 새로 추가한 메소드
    fun singHitone() = println("Happy song!")
}

// 3. 부 생성자를 사용하는 상속
class Parrot : Bird {
    val language: String

    constructor(name: String, wing: Int, beak: String, color: String, language: String) : super(
        name,
        wing,
        beak,
        color
    ) {
        // 새로 추가한 프로퍼티
        this.language = language
    }

    fun speak() = println("Speak! $language")
}

fun main() {
    val coco = Bird("jmlim bird", 2, "short", "blue")
    val lark = Lark("my lark", 2, "long", "brown")
    val parrot = Parrot("my parrot", 2, "short", "multiple", "korean") // 프로퍼티 추가.

    println("Coco: ${coco.name}, ${coco.wing}, ${coco.beak}, ${coco.color}")
    println("Lark: ${lark.name}, ${lark.wing}, ${lark.beak}, ${lark.color}")
    println("Parrot: ${parrot.name}, ${parrot.wing}, ${parrot.beak}, ${parrot.color}, ${parrot.language}")

    lark.singHitone() // 새로 추가한 메서드 사용가능
    parrot.speak()
    lark.fly()
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=55981:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section2.openclass.BirdChildClassesKt
Coco: jmlim bird, 2, short, blue
Lark: my lark, 2, long, brown
Parrot: my parrot, 2, short, multiple, korean
Happy song!
Speak! korean
Fly wing: 2

Process finished with exit code 0
```
### 오버로딩
 - 매개변수만 달리해서 여러 번 정의 될 수 있는 개념, 반환값은 동일하거나 달라질 수 있음
 
 #### OverloadCalc.kt
 ```kotlin
package io.jmlim.kotlinstudy.chap05.section3.overload

fun main() {
    val calc = Calc()
    println(calc.add(3, 2))
    println(calc.add(3.2, 1.3))
    println(calc.add(3, 3, 2))
    println(calc.add("Hello", "World"))
}

class Calc {
    // 다양한 매개변수로 오버로딩된 메소드
    fun add(x: Int, y: Int): Int = x + y
    fun add(x: Double, y: Double): Double = x + y
    fun add(x: Int, y: Int, z: Int): Int = x + y + z
    fun add(x: String, y: String): String = x + y
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=56251:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section3.overload.OverloadCalcKt
5
4.5
8
HelloWorld

Process finished with exit code 0
```

### 오버라이딩
 - 오버라이드(Override) 란 사전적 의미로 (기존의 작업을) 중단하다, 뒤엎다 등으로 해석
 - 간단하게 재정의한다 라고 할 수 있음
 - 코틀린에서는 기반클래스의 내용을 파생 클래스가 오버라이딩 하기위해 기반 클래스에서는 open 키워드, 파생클래스에서는 override 키워드 사용
 - 기능변경이 싫어서 아예 오버라이딩을 막고자 한다면 override 키워드 앞에 final 키워드를 사용해 하위 클래스에서 재정의되는것을 막을 수 있음

#### BirdOverrideEx.kt

```kotlin
package io.jmlim.kotlinstudy.chap05.section3.override

// 상속 가능한 클래스를 위해 open 사용
open class Bird(var name: String, var wing: Int, var beak: String, var color: String) {
    // 메서드
    fun fly() = println("Fly wing: $wing")

    // 오버라이딩 가능한 메서드
    open fun sing(vol: Int) = println("Sing vol: $vol")
}

// 마지막 인자만 var 로 선언되어 프로퍼티가 추가 되었음을 알림.
class Parrot(name: String, wing: Int = 2, beak: String, color: String, var language: String = "natural") :
    Bird(name, wing, beak, color) {
    // Parrot 에 추가된 메소드
    fun speak() = println("Speak! $language")

    // 오버라이딩된 메서드
    override fun sing(vol: Int) {
        println("아이엠 페롯트~~~ $vol")
        speak()
    }
}

fun main() {
    val parrot = Parrot(name = "jmlim parrot", beak = "short", color = "multiple")
    parrot.language = "English"

    println("Parrot: ${parrot.name}, ${parrot.wing}, ${parrot.beak}, ${parrot.color}")
    // 달라진 메서드 실행 가능
    parrot.sing(5)
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=56531:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section3.override.BirdOverrideExKt
Parrot: jmlim parrot, 2, short, multiple
아이엠 페롯트~~~ 5
Speak! English

Process finished with exit code 0
```

## super와 this 의 참조
 - 상위 클래스는 super 키워드로, 현재 클래스는 this 키워드로 참조가 가능하다. 

#### super와 this 키워드의 이용
 |super|this|
 |------|---|
 |super.프로퍼티 이름 // 상위 클래스의 프로퍼티 참조 | this.프로퍼티 이름 // 현재 클래스의 프로퍼티 참조|
 |super.메서드 이름() // 상위 클래스의 메서드 참조 | this.메서드 이름() // 현재 클래스의 메서드 참조 |
 |super() // 상위 클래스의 생성자 참조 | this() // 현재 클래스의 생성자 참조|
 
 #### this 와 super를 사용하는 부 생성자
 #### PersionThisSuper.kt
 
  > 코드를 실행하면 차례로 3,2,1 번 순으로 작업이 진행됨
 ```kotlin
package io.jmlim.kotlinstudy.chap05.section4.personthis

open class Person {
    constructor(firstname: String) {
        println("[Person] firstname: $firstname")
    }

    constructor(firstname: String, age: Int) { // 3
        println("[Person] firstname: $firstname, $age")
    }
}

class Developer : Person {
    constructor(firstname: String) : this(firstname, 10) { // 1
        println("[Developer] $firstname")
    }

    constructor(firstname: String, age: Int) : super(firstname, age) { // 2
        println("[Developer] $firstname, $age")
    }
}

fun main() {
    val sean = Developer("Sean")
}


```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=56776:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section4.personthis.PersonThisSuperKt
[Person] firstname: Sean, 10
[Developer] Sean, 10
[Developer] Sean

Process finished with exit code 0
```

### 주 생성자와 부 생성자 함께 사용하기.
 - 만일 주 생성자와 부 생성자가 함께 있다면 this를 사용해 주 생성자를 가리킬 수 있음.

#### PersonPriSeconRef.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section4.prisecon

// 2. 주 생성자
class Person(firstname: String, out: Unit = println("[Primary Constructor] Parameter")) {

    val fName = println("[Property] Person fName: $firstname") // 3. 프로퍼티 할당

    init {
        // 4. 초기화 블록
        println("[init] Person init block")
    }

    // 1. 부 생성자
    constructor(
        firstname: String,
        age: Int,
        out: Unit = println("[Secondary Constructor] Parameter")
    ) : this(firstname) {
        // 5 부 생성자 본문
        println("[Secondary Constructor] Body: $firstname, $age")
    }
}

fun main() {
    val p1 = Person("kildong", 30) // 1 -> 2 호출, 3->4->5  실행
    println()
    val p2 = Person("Dooly") // 2 호출, 3 -> 4 실행
}
```

```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=57666:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section4.prisecon.PersonPriSeconRefKt
[Secondary Constructor] Parameter
[Primary Constructor] Parameter
[Property] Person fName: kildong
[init] Person init block
[Secondary Constructor] Body: kildong, 30

[Primary Constructor] Parameter
[Property] Person fName: Dooly
[init] Person init block

Process finished with exit code 0

```

### 바깥 클래스에서 호출하기
 - 클래스를 선언할 때 클래스 안에 다시 클래스를 선언하는 것이 가능하다. 
 - 이때 특정 클래스 안에 선언된 클래스를 이너 클래스(Inner Class) 라고 한다.
 - 만일 이너 클래스에서 바깥 클래스의 상위 클래스를 호출하려면 super 키워드와 함께 @ 기호 옆에 바깥 클래스 이름을 작성한다.
 
#### InnerClassRef.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section4.innerref

// 이너 클래스에서 바깥 클래스 접근
open class Base {
    open val x: Int = 1
    open fun f() = println("Base Class f()")
}

class Child : Base() {
    override val x: Int = super.x + 1
    override fun f() = println("Child Class f()")

    inner class Inside {
        fun f() = println("Inside Class f()")
        fun test() {
            f() // 1. 현재 이너 클래스의 f() 접근
            Child().f() // 2. 바로 바깥 클래스 f()  접근
            super@Child.f() // 3. Child의 상위 클래스인 Base 클래스의 f() 접근
            println("[Inside] super@Child.x: ${super@Child.x}") // 4. Base의 x 접근
        }
    }
}

fun main() {
    val c1 = Child()
    // 이너 클래스의 Inside 메서드 test() 실행
    c1.Inside().test()
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=57873:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section4.innerref.InnerClassRefKt
Inside Class f()
Child Class f()
Base Class f()
[Inside] super@Child.x: 1

Process finished with exit code 0
```

### 인터페이스에서 참조하기
 - 인터페이스(Interface)는 일종의 구현 약속으로 인터페이스를 참조하는 클래스는 인터페이스가 가지고 있는 내용을 구현해야 하는 가이드를 제시
 - 동일한 이름의 프로퍼티나 메서드가 있다면 앵글 브래킷(<>)을 사용해 접근하려는 클래스나 인터페이스의 이름을 정해줌.

#### AngleBracketTest.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section4.angle_bracket

open class A {
    open fun f() = println("A Class f()")
    fun a() = println("A Class a()")
}

interface B {
    // 인터페이스는 기본적으로 open 임
    fun f() = println("B Interface f()")

    fun b() = println("B interface b()")
}

// 1. 쉼표(,) 를 사용해 클래스와 인터페이스를 지정
class C : A(), B {
    // 컴파일되려면 f() 가 오버라이딩 되어야함.
    override fun f() = println("C Class f()")

    fun test() {
        f() // 2. 현재 클래스의 f()
        b() // 3. 인터페이스 B의 b()
        super<A>.f() // 4. A 클래스의 f()
        super<B>.f() // 5. B interface 의 f()
    }
}

fun main() {
    val c = C()
    c.test()
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=58017:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section4.angle_bracket.AngleBracketTestKt
C Class f()
B interface b()
A Class f()
B Interface f()

Process finished with exit code 0

```

 - 3 번 인터페이스의 b() 처럼 이름이 중복되지 않을 경우에는 그냥 사용할 수 있으나 중복된 이름 앵글 브래킷을 사용해 super<A>.f() 와 super<B>.f() 로 구분할 수 있음.
 - f() 를 그냥 사용하면 현재 클래스의 f()를 호출함
 
## 정보 은닉 캡슐화
 - 자동차의 핸들은 우리가 만질 수 있도록 공개되어 있음.
 - 하지만 그 아래 조향 장치나 엔진은 차체 내부에 숨겨져 있음.
 - 마찬가지로 클래스를 작성할 때 숨겨야 하는 속성이나 기능이 있을 수 있다.
    - 이러한 개념을 캡슐화(Encapsulation) 라고 함
    
 ### 코틀린의 가시성 지시자는 아래와 같음
  - private : 외부에서 접근 X
  - public : 기본값 - 어디서든 접근 가능
  - protected: 외부에서 접근할 수 없으나 하위 상속 요소에서는 가능
  - internal: 같은 정의의 모듈 내부에서는 접근이 가능
  
 > 가시성을 지시자가 선언되는 위치는 다음과 같음

 ```
 [가시성 지시자] <val | var> 전역 변수 이름
 [가시성 지시자] fun 함수 이름() { .... }
 [가시성 지시자] [특정 키워드] class 클래스 이름 [가시성 지시자] constructor(매개변수) {
    [가시성 지시자] constructor() { ... }
    [가시성 지시자] 프로퍼티
    [가시성 지시자] 메서드
 }
```

### private 가시성 테스트
#### PrivateTest.kt

```kotlin
package io.jmlim.kotlinstudy.chap05.section5.privatetest

private class PrivateClass {
    private var i = 1
    private fun privateFunc() {
        i += 1 // 접근허용
    }

    fun access() {
        privateFunc() // 접근허용
    }
}

class OtherClass {
    // val opc = PrivateClass() // 불가 - 프로퍼티 opc는 private 이 되어야함
    private val opc = PrivateClass() // 가능 - 프로퍼티 opc가 private 이므로

    fun test() {
        val pc = PrivateClass() // 생성가능
    }
}

fun main() {
    val pc = PrivateClass() // 생성가능
    // pc.i // 접근불가
    //  pc.privateFunc(); // 접근불가
}

fun TopFunction() {
    val tpc = PrivateClass() // 객체 생성 가능
}
```

### protected 가시성 테스트하기
 - protected 지시자는 최상위에 선언된 요소에는 지정할 수 없고 클래스나 인터페이스와 같은 요소의 멤버에만 지정할 수 있음

#### ProtectedTest.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section5.protectedtest

// 최상위 클래스에는 protected를 사용할 수 없음
open class Base {
    protected var i = 1
    protected fun protectedFunc() {
        i += 1 // 접근허용
    }

    fun access() {
        protectedFunc() // 접근허용
    }

    protected class Nested // 내부 클래스에는 지시자 허용
}

class Derived : Base() {
    fun test(base: Base): Int {
        protectedFunc() // Base 클래스의 메서드 접근 가능
        return i
    }
}

fun main() {
    val base = Base() // 생성가능
    // base.i // 접근 불가
    // base.protectedFunc() // 접근불가
    base.access() // 접근가능
}
```

### internal
 - 코틀린의 internal 은 자바와 다르게 새롭게 정의된 이름.
 - internal은 프로젝트 단위의 모듈(Module)을 가리키기도 함.
 - 코틀린에서는 패키지에 제한하지 않고 하나의 모듈 단위를 대변하는 internal을 쓴다.
 
 #### InternalTest.kt
 ```kotlin
package io.jmlim.kotlinstudy.chap05.section5.internal

internal class InternalClass {
    internal var i = 1
    internal fun icFunc() {
        i += 1 // 접근허용
    }
    fun access() {
        icFunc() // 접근허용
    }
}

class Other {
    // 프로퍼티를 지정할 때 internal 로 맞춰야함
    internal val ic = InternalClass()
    fun test() {
        ic.i // 접근허용
        ic.icFunc() // 접근허용
    }
}

fun main() {
    val mic = InternalClass()
    mic.i // 접근허용
    mic.icFunc() // 접근허용
}
```

> 같은 프로젝트의 모듈에만 있으면 어디서든 접근이 가능. 

> 다음과 같이 파일이 달라져도 동일한 모듈에 있다면 바로 접근할 수 있다.

```kotlin
package io.jmlim.kotlinstudy.chap05.section5.internal

fun main() {
    val otheric = InternalClass()
    println(otheric.i)
    otheric.icFunc()
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=58471:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section5.internal.InternalTestOtherFileKt
1

Process finished with exit code 0
```

### 가시성 지시자와 클래스와의 관계
```kotlin
open class Base {
    // 이 클래스에서는 a,b,c,d,e 접근가능
    private val a = 1
    protected open val b = 2
    internal val c = 3
    val d = 4 // 가시성 지시자 (기본값은 public)
    
    protected class Nested {
    // 이 클래스에서는 a,b,c,d,e,f 접근가능
        public val e: Int = 5; // public 생략 가능
        private val f: Int = 6
    }
}

class Derived: Base() {
    // 이 클래스에서는 b,c,d,e 접근가능
    // a는 접근불가
    override val b = 5 // Base의 b는 오버라이딩됨 - 상위와 같은 protected 지시자
}

class Other(base: Base) {
    // base.a, base.b 는 접근 불가
    // basse.c와 base.b 는 접근가능 (같은 모듈안에 있으므로) 
    // base.nested 는 접근불가, Nested::e 역시 접근 불가
}

```

## 클래스와 클래스의 관계
 > 현실 세계에서는 사람들끼리 서로 관계를 맺고 서로 메세지를 주고받으며 필요한 경우 서로의 관계를 이용하여 우리의 삶을 풍요롭게 한다. 
 혹은 사장과 직원관의 관계처럼 주로 단방향의 지시 메세지를 보내는 관계도 있다. 때로는 자동차와 엔진처럼 종속적인 관계가 만들어져 자동차에서 차체가 없으면 엔진 혼자서는
 별로 의미가 없는 경우도 있다.
 
 
 ### 연관관계
  - 연관(Association) 관계란 2개의 서로 분리된 클래스가 연결을 가지는 것. 
  - 단방향 혹은 양방향으로 연결될 수 있음.
  
 #### AssociationTest.kt
 
 ```kotlin
package io.jmlim.kotlinstudy.chap05.section6.association

class Patient(val name: String) {
    fun doctorList(d: Doctor) { //인자로 참조
        println("Patient: $name, Doctor: ${d.name}")
    }
}

class Doctor(val name: String) {
    fun patientList(p: Patient) {
        println("Doctor: $name, Patient: ${p.name}")
    }
}

fun main() {
    // 객체가 따로 생성됨
    val doc1 = Doctor("KimSaBu")
    val patient1 = Patient("Kildong")
    doc1.patientList(patient1)
    patient1.doctorList(doc1)
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=58841:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section6.association.AssociationTestKt
Doctor: KimSaBu, Patient: Kildong
Patient: Kildong, Doctor: KimSaBu

Process finished with exit code 0

```

> Doctor와 Patient 클래스의 객체는 따로 생성되며 서로 독립적인 생명주기를 가지고 있다. 
위 코드에서는 두 클래스가 서로의 객체를 참조하므로 양방향 참조를 가진다.

### 의존관계
 - 한 클래스가 다른 클래스에 의존되어 있어 영향을 주는 경우 의존(Dependency) 관계라고 한다.
 - ex) Doctor 클래스를 생성하려고 하는데 먼저 Patient 객체가 필요한 경우

#### DependencyTest.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section5.dependency

class Patient(val name: String, var id: Int) {
    fun doctorList(d: Doctor) {
        println("Patient: $name,  Doctor: ${d.name}")
    }
}

class Doctor(val name: String, val p: Patient) {
    val customerId: Int = p.id

    fun patientList() {
        println("Doctor: $name, Patient: ${p.name}")
        println("Patient Id: $customerId")
    }
}

fun main() {
    val parient1 = Patient("kildong", 1234)
    val doc1 = Doctor("KimSaBu", parient1)
    doc1.patientList()
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=58970:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section5.dependency.DependencyTestKt
Doctor: KimSaBu, Patient: kildong
Patient Id: 1234

Process finished with exit code 0

```

### 집합관계
 - 집합(Aggregation) 관계는 연관관계와 거의 동일하지만 특정 객체를 소유한다는 개념이 추가된 것.
 - 앞에서 나타낸 연못(Pond)과 오리의 예에서 오리가 특정 연못을 주거지로 삼는다면? 연못이 오리를 소유할 수 있는 것.
 
#### AggregationTest.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section6.aggregation

// 여러마리의 오리를 위한 List 매개변수
class Pond(_name: String, _members: MutableList<Duck>) {
    val name: String = _name
    val members: MutableList<Duck> = _members

    constructor(_name: String) : this(_name, mutableListOf<Duck>())
}

class Duck(val name: String) {

}

fun main() {
    // 두 개체는 서로 생명주기에 영향을 주지 않음.
    val pond = Pond("my Favorite")
    val duck1 = Duck("Duck1")
    val duck2 = Duck("Duck2")

    // 연못에 오리를 추가 - 연못에 오리가 집합
    pond.members.add(duck1)
    pond.members.add(duck2)

    for (duck in pond.members) {
        println(duck.name)
    }
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=59489:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section6.aggregation.AggregationTestKt
Duck1
Duck2

Process finished with exit code 0
```

### 구성 관계
 - 구성(Composition) 관계는 집합 관계와 거의 동일하지만 특정 클래스가 어느 한 클래스의 부분이 되는 것.
 - 구성품으로 지정된 클래스는 생명주기가 소유자 클래스에 의존되어 있으므로 소유자 클래스가 삭제되면 구성하고 있던 클래스도 같이 삭제 됨.

#### CompositionTest.kt
```kotlin
package io.jmlim.kotlinstudy.chap05.section6.composition

class Car(val name: String, val power: String) {
    private var engine = Engine(power) // Engine 클래스 객체는 Car 에 의존적

    fun startEngine() = engine.start()
    fun stopEngine() = engine.stop()
}

class Engine(power: String) {
    fun start() = println("Engine has been started.")
    fun stop() = println("Engine has been stopped")
}

fun main() {
    val car = Car("tico", "100hp")
    car.startEngine()
    car.stopEngine()
}
```
```
"C:\Program Files\Java\jdk1.8.0_171\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\lib\idea_rt.jar=59573:C:\Program Files\JetBrains\IntelliJ IDEA 2018.1.5\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.8.0_171\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_171\jre\lib\rt.jar;C:\dev\git\kotlin_study\out\production\kotlin_study;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-reflect.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-test.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk7.jar;C:\Users\hacke\.IntelliJIdea2018.1\config\plugins\Kotlin\kotlinc\lib\kotlin-stdlib-jdk8.jar" io.jmlim.kotlinstudy.chap05.section6.composition.CompositionTestKt
Engine has been started.
Engine has been stopped

Process finished with exit code 0

```

 > engine 클래스는 Car 클래스의 생명주기에 의존적. 
 집합관계와 달리 구성관계에서는 만일 car 객체가 삭제되면 동시에 engine 객체도 삭제됨.

### 객체간의 메세지 전달하기.
 - 두 객체간의 메세지 전달은 프로그래밍에서 아주 흔하며 시간의 흐름에 따라 일어나는 경우가 대부분이기 때문에 주로 UML의 시퀀스 다이어그램으로 표현함.
 
 EX) 
 ```kotlin
...
touchscreen.pin()
class Touchscreen {
    fun pin() {
        ...
        bankController.getBalance("123-456")
    }
}

class BankController {
    fun getBalance(val account: String) {
        ....
        account.getBalance()
    }
}
``` 

> 보통 메세지는 받는 수신자와 실행할 메서드가 사용됨.